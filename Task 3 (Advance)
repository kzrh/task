using System;
using System.Collections.Generic;

public class ReverseAlgorithm
{
    public static char[] ReverseOrderByAlgorithm(char[] input, int ordering)
    {
        List<char> tempList = new List<char>(input);
        List<char> result = new List<char>(new char[tempList.Count]);
        int currentIndex = 0;
        int stepCount = 0;

        for (int i = 0; i < tempList.Count; i++)
        {
            if (tempList[i] == '-')
            {
                // Skip the dash
                result[i] = '-';
                stepCount++;
                continue;
            }

            currentIndex = (currentIndex + ordering - 1) % tempList.Count;
            while (result[currentIndex] != '\0')
            {
                currentIndex = (currentIndex + 1) % tempList.Count;
            }

            result[currentIndex] = tempList[i];
            stepCount++;
            if (stepCount % 3 == 0 && tempList.Count > 0)
            {
                currentIndex = (currentIndex + 1) % tempList.Count;
            }
        }

        return result.ToArray();
    }

    public static void Main()
    {
        char[] input = "e  rbml s nngeshsr etaet.loaldtryadaimt di ghtoeaeuse aC cuciy afskh ss t ovgo tna atstanmeempaa  Itrf oee!oenotou".ToCharArray();
        char[] output = ReverseOrderByAlgorithm(input, 24);
        Console.WriteLine(new String(output)); 
    }
}
